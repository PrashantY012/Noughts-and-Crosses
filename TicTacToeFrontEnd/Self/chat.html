<!DOCTYPE html>
<html>
<body>
<h2>WebSocket Chat</h2>

<input id="msg" type="text">
<button onclick="send()">Send</button>

<ul id="messages"></ul>

<script src="https://cdn.jsdelivr.net/npm/sockjs-client/dist/sockjs.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/stompjs/lib/stomp.min.js"></script>

<script>
  var socket = new SockJS('http://localhost:8080/ws');
  var stomp = Stomp.over(socket);

  stomp.connect({}, function () {
    stomp.subscribe('/topic/messages', function (msg) {
      const body = JSON.parse(msg.body);
      document.getElementById("messages").innerHTML += "<li>" + body.from + ": " + body.text + "</li>";
    });
  });

  function send() {
    const input = document.getElementById("msg").value;
    stomp.send("/app/send", {}, JSON.stringify({from: "User", text: input}));
  }
</script>

</body>
</html>
